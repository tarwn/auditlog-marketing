---
title: API Documentation
moddate: 2017-09-01
layout: api.html
---

<div class="alm-api-area">

    <div class="alm-api-sidebar">
        <header class="alm-api-header">
            <a href="/" class="alm-logo">
                <img src="/images/logo56.png" alt="AL" />
                <span>auditlog</span>
            </a>
        </header>
        
        <div class="alm-api-menu">
            <ul>
                <li><a href="#api-reference">API Reference</a></li>
                <li><a href="#authentication">Authentication</a></li>
                <li><a href="#errors">Errors</a></li>
                <li><a href="#idempotent">Idempotent Events</a></li>
                <li><a href="#versioning">API Versioning</a></li>
                <li>
                    <a href="#types">Core Types</a>
                    <ul>
                            <li><a href="#types-event">Event</a></li>
                            <li><a href="#types-actor">Actor</a></li>
                            <li><a href="#types-client">Client</a></li>
                            <li><a href="#types-view">View</a></li>
                    </ul>
                </li>
                <li>
                    <a href="#event-reporting">Submitting Data</a>
                    <ul>
                        <li><a href="#events-api-post">Events</a></li>
                    </ul>
                </li>
                <li>
                    <a href="#event-querying">Querying Data</a>
                    <ul>
                        <li><a href="#views-api-get">Views</a></li>
                        <li><a href="#events-api-get">Events</a></li>
                    </ul>
                </li>
                <li>
                    <a href="actors-api">Users / Actors</a>
                    <ul>
                        <li><a href="#actors-api-search">Search</a></li>
                        <li><a href="#actors-api-update">Update</a></li>
                        <li><a href="#actors-api-forget">Forget</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
    <div class="alm-api-main">
        <div class="alm-api-background">
        </div>
        <div class="alm-api-sections" id="scrollable-main">
            <div class="alm-api-section">
                <div class="alm-api-section-left first">
                    <h1 id="api-reference"><a href="#api-reference">API Reference</a></h1>
                    <p>
                        Welcome to AuditLog's API! The API enables you to <a href="#event-reporting">submit Events</a>, 
                        query customized Views and Events with <a href="#event-querying">Event Queries</a>, and
                        satisfy privacy needs with the <a href="#actors-api">Actor API</a>.
                    </p>
                    <p>
                        The API is organized around <a href="https://en.wikipedia.org/wiki/Representational_state_transfer" target="_blank">REST</a>. 
                        All requests should be made over SSL. All request and response bodies, including errors, support JSON and XML. Standard content type 
                        headers should be used to indicate <code>application/json</code> or <code>text/xml</code>.
                    </p>
                    <p>
                        Authentication to the API is performed via a custom <code>X-API-KEY</code> header and is required for all requests.
                    </p>
                </div>
                <div class="alm-api-section-right first"></div>
            </div>
            <div class="alm-api-section">
                <div class="alm-api-section-left first">
                    <h1 id="authentication"><a href="#authentication">Authentication</a></h1>
                    <p>
                        Authentication is done via the Consumer Id and Secret which can be managed in the
                        <a href="https://app.auditlog.co/configure/apikeys">Configure API Keys</a> section of
                        the application.
                    </p>
                    <p>
                        Requests are authentications using a custom <code>X-API-KEY</code> header containing the Consumer Id and 
                        Secret as a colon-seperated string: <i>{consumer id}</i>:<i>{secret}</i>
                    </p>
                    <p>
                        You can see generated Consumer Id's and create and roll Consumer Secrets from the <a href="https://app.auditlog.co/configure/apikeys">application</a>.
                    </p>
                </div>
                <div class="alm-api-section-right first">
                    <blockquote class="alm-lang-curl">Authentication using X-API-KEY HTTP Header.</blockquote>
                    <pre class="highlight lang-bash alm-lang-curl">
curl 'https://app.auditlog.co/api/v1/actors/{user uuid}' \
    -H 'x-api-key: {consumer id}:{secret}'
    -H 'accept: application/json'</pre>
                </div>
            </div>
            <div class="alm-api-section">
                <div class="alm-api-section-left">
                    <h1 id="errors"><a href="#errors">Errors</a></h1>
                    <p>
                        The API returns standard HTTP success and error codes. For errors, it will also include 
                        extra information about what went wrong in structured JSON or XML. Standard HTTP status
                        codes are listed below and called out on API operations further below.
                    </p>
                    <h2>HTTP Status Codes</h2>
                    <p>
                        <table>
                            <tr><th>Code</th><th>Title</th><th>Description</th></tr>
                            <tr><td>200</td><td>OK</td><td>The request was successful</td></tr>
                            <tr><td>400</td><td>Bad Request</td><td>Bad request, typically missing or invalid inputs</td></tr>
                            <tr><td>401</td><td>Unauthorized</td><td>API key details not provided</td></tr>
                            <tr><td>402</td><td>Over quota</td><td>Your request has been rate limited</td></tr>
                            <tr><td>403</td><td>Unauthorized</td><td>Could not validate your API key</td></tr>
                            <tr><td>404</td><td>Not Found</td><td>Requested resource was not found</td></tr>
                            <tr><td>50x</td><td>Internal Server Error</td><td>An error occurred in our service</td></tr>
                        </table>
                    </p>
                </div>
            </div>
            <div class="alm-api-section">
                <div class="alm-api-section-left">
                    <h2>ApiError Type</h2>
                    <p>
                        Additional details are returned with many errors, encoded in either JSON or XML (per the provided <code>ACCEPTS</code> HTTP header).
                        <table>
                            <tr><th>Property</th><th></th><th>Description</th></tr>
                            <tr><td>statusCode</td><td>int</td><td>HTTP Status code</td></tr>
                            <tr><td>message</td><td>string</td><td>Human-readable error message</td></tr>
                            <tr><td>details</td><td>key/values</td><td>Key/value list of additional details</td></tr>
                        </table>
                    </p>
                </div>
                <div class="alm-api-section-right alm-extra-top-margin">
                    <blockquote class="alm-lang-curl">Authentication using X-API-KEY HTTP Header.</blockquote>
                    <pre class="highlight lang-bash alm-lang-curl">
curl 'https://app.auditlog.co/api/v1/actors/user-123' \
    -H 'x-api-key: {consumer id}:{secret}'
    -H 'accept: application/json'</pre>
                </div>
            </div>
        </div>
        <nav class="alm-api-lang-selector">
                <a data-language="curl" href="javascript: void(0);">Curl</a>
                <a data-language="notcurl" href="javascript: void(0);">Curl</a>
                <span>More options soon</span>
        </nav>
    </div>
</div>
<script type="text/javascript">
var currentOptions = {
    language: '',
    location: undefined
};

function setFromUrl(defaultValue, availableLanguages){
    var url = window.location.href;
    var regex =  new RegExp('[?&]([^&#]*)');
    var match = regex.exec(url);
    if(match != null && match[1] != null && availableLanguages.indexOf(match[1]) >= 0){
        currentOptions.language = match[1];
    }
    else{
        currentOptions.language = defaultValue;
    }

    var hash = location.hash.replace(/^#/, '');
    currentOptions.location = hash;
}

function applySelectedLanguage(){
    $('a[data-language]').removeClass('selected');
    $('a[data-language="' + currentOptions.language + '"]').addClass('selected');

    $('.alm-api-section-right blockquote').hide();
    $('.alm-api-section-right pre').hide();
    $('.alm-lang-' + currentOptions.language).show();

    history.pushState({}, "AuditLog.co - API: " + currentOptions.language, "?" + currentOptions.language + "#" + (currentOptions.location || ""));
}

function applyWaypoints(){
    $('h1[id]').waypoint({
        handler: function(){ 
            currentOptions.location = this.element.id;
            applySelectedLanguage();
        },
        context: document.getElementById('scrollable-main'),
        offset: 25
    });

    $('h1[id]').waypoint({
        handler: function(){ 
            currentOptions.location = this.element.id;
            applySelectedLanguage();
        },
        context: document.getElementById('scrollable-main'),
        offset: -25
    });
}

function hashChanged(){
    var hash = location.hash.replace(/^#/, '');
    currentOptions.location = hash;
}

$().ready(function(){
    var availableOptions = $('a[data-language]');
    var availableLanguages = [];
    availableOptions.each(function(i, a) { availableLanguages.push($(a).data('language')); });
    
    setFromUrl(availableLanguages[0], availableLanguages);

    applySelectedLanguage();
    if(currentOptions.location){
        var titleLoc = $('#' + currentOptions.location).offset().top;
        $('#scrollable-main').scrollTop(titleLoc);
    }

    applyWaypoints();

    availableOptions.click(function(e){
        var language = $(e.target).data('language');
        currentOptions.language = language;
        applySelectedLanguage();
    });

    window.addEventListener("hashchange", hashChanged, false);

    $('pre.highlight').each(function(i, block) {
        hljs.highlightBlock(block);
    });
});
</script>